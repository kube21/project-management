{"ast":null,"code":"var _jsxFileName = \"/home/mithun/Documents/project-tracking/client/src/components/users/findUser.js\";\n\n/* eslint-disable react/jsx-indent */\nimport React, { Component } from \"react\";\nimport { BackTop, Layout, Form, Row, Col, Input, Collapse, Button, Table, Drawer, Icon, Popconfirm, message } from \"antd\";\nimport dictionary from \"../../config/static/Dictionary\";\nimport HeaderMain from \"../../containers/header/header-container\";\nimport Sidebar from \"../../containers/sidebar/sidebar-container\";\nimport Footer from \"../common/footer\";\nimport NewUser from \"../../containers/users/new-user\";\nimport { compareObjects } from \"../../utils/utils\";\nconst {\n  Header,\n  Content\n} = Layout;\nconst {\n  Panel\n} = Collapse;\n\nclass FindUser extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getUsers = () => {\n      const {\n        getAllUsers\n      } = this.props;\n      getAllUsers();\n    };\n\n    this.editUser = currentUser => {\n      this.setState({\n        currentUser,\n        visibleEdit: true,\n        visibleCreate: false\n      });\n    };\n\n    this.deleteUser = id => {\n      const {\n        deleteUser\n      } = this.props;\n      deleteUser(id);\n      this.setState({\n        loading: true,\n        lastDeletedId: true\n      });\n    };\n\n    this.handleChange = event => {\n      const {\n        value\n      } = event.target;\n      const {\n        items\n      } = this.state;\n      const resultJson = items.filter(item => {\n        return item.email.toLowerCase().search(value.toLowerCase()) !== -1 || item.userName.toLowerCase().search(value.toLowerCase()) !== -1;\n      });\n      this.setState({\n        resultJson,\n        searchValue: value\n      });\n    };\n\n    this.onCreate = () => {\n      this.setState({\n        visibleCreate: false\n      });\n    };\n\n    this.onEdit = () => {\n      this.setState({\n        visibleEdit: false\n      });\n    };\n\n    this.state = {\n      resultJson: [],\n      loading: true,\n      visibleCreate: false,\n      visibleEdit: false,\n      items: [],\n      lastDeletedId: false,\n      searchValue: \"\"\n    };\n  }\n\n  componentDidMount() {\n    this.getUsers();\n  }\n\n  UNSAFE_componentWillReceiveProps(newProps) {\n    const {\n      userResponse,\n      deleteResponse\n    } = newProps;\n    const {\n      items,\n      lastDeletedId\n    } = this.state;\n\n    if (userResponse && userResponse.data) {\n      if (compareObjects(items, userResponse.data)) {\n        this.setState({\n          resultJson: userResponse.data,\n          items: userResponse.data,\n          loading: false\n        });\n      }\n    }\n\n    console.log('deleteResponse---->>', deleteResponse);\n\n    if (deleteResponse && deleteResponse.success && lastDeletedId) {\n      this.setState({\n        lastDeletedId: false\n      });\n      this.getUsers();\n      setTimeout(() => {\n        message.success(\"User deleted successfully\");\n      }, 2000);\n    }\n  }\n\n  renderUsers() {\n    const {\n      loading,\n      resultJson,\n      visibleCreate,\n      visibleEdit,\n      currentUser,\n      searchValue\n    } = this.state;\n    const tableColums = [{\n      title: \"User Name\",\n      dataIndex: \"userName\",\n      key: \"userName\",\n      render: (text, record) => {\n        return /*#__PURE__*/React.createElement(\"a\", {\n          href: \"#\",\n          onClick: () => this.editUser(record),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 13\n          }\n        }, record.userName);\n      }\n    }, {\n      title: \"Email\",\n      dataIndex: \"email\",\n      key: \"email\",\n      render: (text, record) => record.email || \"-\"\n    }, {\n      title: \"Phone Number\",\n      dataIndex: \"phoneNumber\",\n      key: \"phoneNumber\",\n      render: (text, record) => record.phoneNumber || \"-\"\n    }, {\n      title: \"Position\",\n      dataIndex: \"position\",\n      key: \"position\",\n      render: (text, record) => record.position || \"-\"\n    }, {\n      title: \"Date of birth\",\n      dataIndex: \"dateOfBirth\",\n      key: \"dateOfBirth\",\n      render: (text, record) => record.dateOfBirth || \"-\"\n    }, {\n      title: \"Date of joining\",\n      dataIndex: \"dateOfJoining\",\n      key: \"dateOfJoining\",\n      render: (text, record) => record.dateOfJoining || \"-\"\n    }, {\n      title: \"Delete\",\n      dataIndex: \"mode\",\n      key: \"mode\",\n      render: (text, record) => {\n        return /*#__PURE__*/React.createElement(Popconfirm, {\n          title: \"Do you want to delete this user?\",\n          onConfirm: () => this.deleteUser(record._id),\n          okText: \"Delete\",\n          cancelText: \"Cancel\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(Icon, {\n          className: \"delete-icon\",\n          type: \"delete\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 15\n          }\n        }));\n      }\n    }];\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Form, {\n      name: \"documentList\",\n      layout: \"vertical\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      gutter: 16,\n      className: \"row\",\n      style: {\n        marginBottom: \"10px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      span: 5,\n      offset: 19,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      type: \"primary\",\n      icon: \"plus\",\n      onClick: () => this.setState({\n        visibleCreate: true,\n        visibleEdit: false\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 17\n      }\n    }, dictionary.CREATE_USER))), /*#__PURE__*/React.createElement(Collapse, {\n      defaultActiveKey: [\"1\"],\n      accordion: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Panel, {\n      header: dictionary.ENTER_SEARCH_CRITERIA_HEADER,\n      key: \"1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      gutter: 16,\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      sm: 12,\n      md: 12,\n      lg: 12,\n      xl: 12,\n      xxl: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Form.Item, {\n      label: dictionary.SEARCH,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      placeholder: dictionary.SEARCH_USER,\n      onChange: this.handleChange,\n      name: \"user_search\",\n      value: searchValue,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 23\n      }\n    })))))), /*#__PURE__*/React.createElement(Row, {\n      gutter: 16,\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      span: 24,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Table, {\n      loading: loading,\n      rowKey: () => resultJson.id,\n      showHeader: true,\n      columns: tableColums,\n      dataSource: resultJson,\n      scroll: {\n        x: true\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 17\n      }\n    }))))), /*#__PURE__*/React.createElement(Drawer, {\n      style: {\n        marginTop: \"50px\"\n      },\n      width: 760,\n      placement: \"right\",\n      closable: true,\n      destroyOnClose: true,\n      onClose: () => this.setState({\n        visibleCreate: false\n      }),\n      visible: visibleCreate,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(NewUser, Object.assign({}, this.props, {\n      closeUser: this.onCreate,\n      isOpen: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 11\n      }\n    }))), /*#__PURE__*/React.createElement(Drawer, {\n      style: {\n        marginTop: \"50px\"\n      },\n      width: 760,\n      placement: \"right\",\n      closable: true,\n      destroyOnClose: true,\n      onClose: () => this.setState({\n        visibleEdit: false\n      }),\n      visible: visibleEdit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(NewUser, Object.assign({}, this.props, {\n      closeUser: this.onEdit,\n      isOpen: true,\n      currentUser: currentUser,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 11\n      }\n    }))));\n  }\n\n  renderInFullScreen() {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(HeaderMain, {\n      isCompany: true,\n      loggedIn: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Layout, {\n      className: \"layoutStyle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Sidebar, Object.assign({}, this.props, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(Layout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      className: \"headerStyle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 13\n      }\n    }, dictionary.USERS), /*#__PURE__*/React.createElement(Content, {\n      className: \"contentStyle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"contentInnerDivStyle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 15\n      }\n    }, this.renderUsers())), /*#__PURE__*/React.createElement(Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 13\n      }\n    }))), /*#__PURE__*/React.createElement(BackTop, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ant-back-top-inner\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 11\n      }\n    }, dictionary.UP_LABEL)));\n  }\n\n  render() {\n    const {\n      isOpen\n    } = this.props;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, isOpen ? this.renderUsers() : this.renderInFullScreen());\n  }\n\n}\n\nexport default Form.create()(FindUser);","map":{"version":3,"sources":["/home/mithun/Documents/project-tracking/client/src/components/users/findUser.js"],"names":["React","Component","BackTop","Layout","Form","Row","Col","Input","Collapse","Button","Table","Drawer","Icon","Popconfirm","message","dictionary","HeaderMain","Sidebar","Footer","NewUser","compareObjects","Header","Content","Panel","FindUser","constructor","props","getUsers","getAllUsers","editUser","currentUser","setState","visibleEdit","visibleCreate","deleteUser","id","loading","lastDeletedId","handleChange","event","value","target","items","state","resultJson","filter","item","email","toLowerCase","search","userName","searchValue","onCreate","onEdit","componentDidMount","UNSAFE_componentWillReceiveProps","newProps","userResponse","deleteResponse","data","console","log","success","setTimeout","renderUsers","tableColums","title","dataIndex","key","render","text","record","phoneNumber","position","dateOfBirth","dateOfJoining","_id","marginBottom","CREATE_USER","ENTER_SEARCH_CRITERIA_HEADER","SEARCH","SEARCH_USER","x","marginTop","renderInFullScreen","USERS","UP_LABEL","isOpen","create"],"mappings":"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","sourcesContent":["/* eslint-disable react/jsx-indent */\nimport React, { Component } from \"react\";\nimport {\n  BackTop,\n  Layout,\n  Form,\n  Row,\n  Col,\n  Input,\n  Collapse,\n  Button,\n  Table,\n  Drawer,\n  Icon,\n  Popconfirm,\n  message,\n} from \"antd\";\nimport dictionary from \"../../config/static/Dictionary\";\nimport HeaderMain from \"../../containers/header/header-container\";\nimport Sidebar from \"../../containers/sidebar/sidebar-container\";\nimport Footer from \"../common/footer\";\nimport NewUser from \"../../containers/users/new-user\";\nimport { compareObjects } from \"../../utils/utils\";\n\nconst { Header, Content } = Layout;\nconst { Panel } = Collapse;\n\nclass FindUser extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      resultJson: [],\n      loading: true,\n      visibleCreate: false,\n      visibleEdit: false,\n      items: [],\n      lastDeletedId: false,\n      searchValue: \"\",\n    };\n  }\n\n  componentDidMount() {\n    this.getUsers();\n  }\n\n  UNSAFE_componentWillReceiveProps(newProps) {\n    const { userResponse, deleteResponse } = newProps;\n    const { items, lastDeletedId } = this.state;\n    if (userResponse && userResponse.data) {\n      if (compareObjects(items, userResponse.data)) {\n        this.setState({\n          resultJson: userResponse.data,\n          items: userResponse.data,\n          loading: false,\n        });\n      }\n    }\n    console.log('deleteResponse---->>',deleteResponse)\n    if (deleteResponse && deleteResponse.success && lastDeletedId) {\n      this.setState({ lastDeletedId: false });\n      this.getUsers();\n      setTimeout(() => {\n        message.success(\"User deleted successfully\");\n      }, 2000);\n    }\n  }\n\n  getUsers = () => {\n    const { getAllUsers } = this.props;\n    getAllUsers();\n  };\n\n  editUser = (currentUser) => {\n    this.setState({\n      currentUser,\n      visibleEdit: true,\n      visibleCreate: false,\n    });\n  };\n\n  deleteUser = (id) => {\n    const { deleteUser } = this.props;\n    deleteUser(id);\n    this.setState({ loading: true, lastDeletedId: true });\n  };\n\n  handleChange = (event) => {\n    const { value } = event.target;\n    const { items } = this.state;\n    const resultJson = items.filter((item) => {\n      return (\n        item.email.toLowerCase().search(value.toLowerCase()) !== -1 ||\n        item.userName.toLowerCase().search(value.toLowerCase()) !== -1\n      );\n    });\n    this.setState({ resultJson, searchValue: value });\n  };\n\n  onCreate = () => {\n    this.setState({ visibleCreate: false });\n  };\n\n  onEdit = () => {\n    this.setState({ visibleEdit: false });\n  };\n\n  renderUsers() {\n    const {\n      loading,\n      resultJson,\n      visibleCreate,\n      visibleEdit,\n      currentUser,\n      searchValue,\n    } = this.state;\n    const tableColums = [\n      {\n        title: \"User Name\",\n        dataIndex: \"userName\",\n        key: \"userName\",\n        render: (text, record) => {\n          return (\n            <a href=\"#\" onClick={() => this.editUser(record)}>\n              {record.userName}\n            </a>\n          );\n        },\n      },\n      {\n        title: \"Email\",\n        dataIndex: \"email\",\n        key: \"email\",\n        render: (text, record) => record.email || \"-\",\n      },\n      {\n        title: \"Phone Number\",\n        dataIndex: \"phoneNumber\",\n        key: \"phoneNumber\",\n        render: (text, record) => record.phoneNumber || \"-\",\n      },\n      {\n        title: \"Position\",\n        dataIndex: \"position\",\n        key: \"position\",\n        render: (text, record) => record.position || \"-\",\n      },\n      {\n        title: \"Date of birth\",\n        dataIndex: \"dateOfBirth\",\n        key: \"dateOfBirth\",\n        render: (text, record) => record.dateOfBirth || \"-\",\n      },\n      {\n        title: \"Date of joining\",\n        dataIndex: \"dateOfJoining\",\n        key: \"dateOfJoining\",\n        render: (text, record) => record.dateOfJoining || \"-\",\n      },\n      {\n        title: \"Delete\",\n        dataIndex: \"mode\",\n        key: \"mode\",\n        render: (text, record) => {\n          return (\n            <Popconfirm\n              title=\"Do you want to delete this user?\"\n              onConfirm={() => this.deleteUser(record._id)}\n              okText=\"Delete\"\n              cancelText=\"Cancel\"\n            >\n              <Icon className=\"delete-icon\" type=\"delete\" />\n            </Popconfirm>\n          );\n        },\n      },\n    ];\n\n    return (\n      <div>\n        <Form name=\"documentList\" layout=\"vertical\">\n          <div>\n            <Row gutter={16} className=\"row\" style={{ marginBottom: \"10px\" }}>\n              <Col span={5} offset={19}>\n                <Button\n                  type=\"primary\"\n                  icon=\"plus\"\n                  onClick={() =>\n                    this.setState({ visibleCreate: true, visibleEdit: false })\n                  }\n                >\n                  {dictionary.CREATE_USER}\n                </Button>\n              </Col>\n            </Row>\n            <Collapse defaultActiveKey={[\"1\"]} accordion>\n              <Panel header={dictionary.ENTER_SEARCH_CRITERIA_HEADER} key=\"1\">\n                <Row gutter={16} className=\"row\">\n                  <Col sm={12} md={12} lg={12} xl={12} xxl={12}>\n                    <Form.Item label={dictionary.SEARCH}>\n                      <Input\n                        placeholder={dictionary.SEARCH_USER}\n                        onChange={this.handleChange}\n                        name=\"user_search\"\n                        value={searchValue}\n                      />\n                    </Form.Item>\n                  </Col>\n                </Row>\n              </Panel>\n            </Collapse>\n            <Row gutter={16} className=\"row\">\n              <Col span={24}>\n                <Table\n                  loading={loading}\n                  rowKey={() => resultJson.id}\n                  showHeader\n                  columns={tableColums}\n                  dataSource={resultJson}\n                  scroll={{ x: true }}\n                />\n              </Col>\n            </Row>\n          </div>\n        </Form>\n        <Drawer\n          style={{ marginTop: \"50px\" }}\n          width={760}\n          placement=\"right\"\n          closable\n          destroyOnClose\n          onClose={() => this.setState({ visibleCreate: false })}\n          visible={visibleCreate}\n        >\n          <NewUser {...this.props} closeUser={this.onCreate} isOpen />\n        </Drawer>\n        <Drawer\n          style={{ marginTop: \"50px\" }}\n          width={760}\n          placement=\"right\"\n          closable\n          destroyOnClose\n          onClose={() => this.setState({ visibleEdit: false })}\n          visible={visibleEdit}\n        >\n          <NewUser\n            {...this.props}\n            closeUser={this.onEdit}\n            isOpen\n            currentUser={currentUser}\n          />\n        </Drawer>\n      </div>\n    );\n  }\n\n  renderInFullScreen() {\n    return (\n      <>\n        <HeaderMain isCompany loggedIn />\n        <Layout className=\"layoutStyle\">\n          <Sidebar {...this.props} />\n          <Layout>\n            <Header className=\"headerStyle\">{dictionary.USERS}</Header>\n            <Content className=\"contentStyle\">\n              <div className=\"contentInnerDivStyle\">{this.renderUsers()}</div>\n            </Content>\n            <Footer />\n          </Layout>\n        </Layout>\n        <BackTop>\n          <div className=\"ant-back-top-inner\">{dictionary.UP_LABEL}</div>\n        </BackTop>\n      </>\n    );\n  }\n\n  render() {\n    const { isOpen } = this.props;\n    return <>{isOpen ? this.renderUsers() : this.renderInFullScreen()}</>;\n  }\n}\nexport default Form.create()(FindUser);\n"]},"metadata":{},"sourceType":"module"}